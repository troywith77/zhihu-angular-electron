var mainList=angular.module("mainList",[]);mainList.directive("mainList",["getListContentService","getDetail","getHistoryContentService",function(t,e,n){return{restrice:"AE",scope:{},templateUrl:"components/mainList/mainList.html",replace:!0,link:function(r){t.getLatestNews().then(function(t){r.lists=t.stories}),r.goToDetail=function(t){e.setDetailId(t)};var a=-1;moment().format("YYYYMMDD");r.goPrev=function(){a+=1;var t=moment().subtract(a,"days").format("YYYYMMDD");n.getHistoryNews(t).then(function(t){r.lists=t.stories})},r.goNext=function(){if(-1!==a){a-=1;var t=moment().subtract(a,"days").format("YYYYMMDD");n.getHistoryNews(t).then(function(t){r.lists=t.stories})}}}}}]),angular.module("mainList").service("getListContentService",["$http","$q",function(t,e){return{getLatestNews:function(){return t.get("http://news-at.zhihu.com/api/4/news/latest").then(function(t){return"object"==typeof t.data?t.data:e.reject(t.data)},function(t){return e.reject(t.data)})}}}]).service("getHistoryContentService",["$http","$q",function(t,e){return{getHistoryNews:function(n){return t.get("http://news.at.zhihu.com/api/4/news/before/"+n).then(function(t){return"object"==typeof t.data?t.data:e.reject(t.data)},function(t){return e.reject(t.data)})}}}]);var menuBar=angular.module("menuBar",[]);menuBar.directive("menuBar",["menuBarHttpRequest",function(t){return{restrict:"EA",templateUrl:"components/menuBar/menuBar.html",scope:{},replace:!0,link:function(e){t.getThemes().then(function(t){e.themes=t.others})}}}]),angular.module("menuBar").service("menuBarHttpRequest",["$http","$q",function(t,e){return{getThemes:function(){return t.get("http://news-at.zhihu.com/api/4/themes").then(function(t){return"object"==typeof t.data?t.data:e.reject(t.data)},function(t){return e.reject(t.data)})}}}]);var header=angular.module("header",[]);header.directive("mainHeader",[function(){return{restrict:"AE",scope:{},replace:!0,templateUrl:"components/header/header.html",link:function(t){t.goBack=function(){history.go(-1)}}}}]),angular.module("detail",[]).directive("detail",["getDetail","$sce",function(t,e){return{restrict:"AE",scope:{},templateUrl:"components/detail/detail.html",link:function(e){t.getdetail().then(function(t){e.content=t.body})}}}]),angular.module("detail").service("getDetail",["$http","$q",function(t,e){var n;return{getdetail:function(){return t.get("http://news-at.zhihu.com/api/4/news/"+n).then(function(t){return"object"==typeof t.data?t.data:e.reject(t.data)},function(t){return e.reject(t.data)})},setDetailId:function(t){n=t}}}]);