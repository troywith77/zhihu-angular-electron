angular.module("detail",[]).directive("detail",["getDetail","$sce","$stateParams",function(t,e,n){return{restrict:"AE",scope:{},templateUrl:"components/detail/detail.html",link:function(e){var a=n.id;t.getdetail(a).then(function(t){e.content=t.body})}}}]),angular.module("detail").service("getDetail",["$http","$q",function(t,e){return{getdetail:function(n){return t.get("http://news-at.zhihu.com/api/4/news/"+n).then(function(t){return"object"==typeof t.data?t.data:e.reject(t.data)},function(t){return e.reject(t.data)})}}}]);var header=angular.module("header",[]);header.directive("mainHeader",[function(){return{restrict:"AE",scope:{},replace:!0,templateUrl:"components/header/header.html",link:function(t){t.goBack=function(){history.go(-1)}}}}]);var mainList=angular.module("mainList",[]);mainList.directive("mainList",["$state","$stateParams","getListContentService","getDetail","getHistoryContentService",function(t,e,n,a,r){return{restrice:"AE",scope:{},templateUrl:"components/mainList/mainList.html",replace:!0,link:function(n){var a=e.date,i=moment().subtract(-1,"days").format("YYYYMMDD");r.getHistoryNews(a).then(function(t){n.lists=t.stories,n.newsDate=t.date}),n.goToDetail=function(e){t.go("detail",{id:e})},n.goPrev=function(){var e=moment(a).subtract(1,"days").format("YYYYMMDD");t.go("list",{date:e})},n.goNext=function(){if(a!==i){var e=moment(a).subtract(-1,"days").format("YYYYMMDD");t.go("list",{date:e})}}}}}]),angular.module("mainList").service("getListContentService",["$http","$q",function(t,e){return{getLatestNews:function(){return t.get("http://news-at.zhihu.com/api/4/news/latest").then(function(t){return"object"==typeof t.data?t.data:e.reject(t.data)},function(t){return e.reject(t.data)})}}}]).service("getHistoryContentService",["$http","$q",function(t,e){return{getHistoryNews:function(n){return t.get("http://news.at.zhihu.com/api/4/news/before/"+n).then(function(t){return"object"==typeof t.data?t.data:e.reject(t.data)},function(t){return e.reject(t.data)})}}}]);var mainThemes=angular.module("mainThemes",[]);mainThemes.directive("mainThemes",["$state","$stateParams","getThemesList",function(t,e,n){return{restrict:"AE",scope:{},replace:!0,templateUrl:"components/mainThemes/mainThemes.html",link:function(a){var r=e.theme;n.getThemes(r).then(function(t){a.themes=t.stories}),a.goToDetail=function(e){t.go("detail",{id:e})}}}}]),angular.module("mainThemes").service("getThemesList",["$http","$q",function(t,e){return{getThemes:function(n){return t.get("http://news-at.zhihu.com/api/4/theme/"+n).then(function(t){return"object"==typeof t.data?t.data:e.reject(t.data)},function(t){return e.reject(t.data)})}}}]);var menuBar=angular.module("menuBar",[]);menuBar.directive("menuBar",["menuBarHttpRequest","$state",function(t,e){return{restrict:"EA",templateUrl:"components/menuBar/menuBar.html",scope:{},replace:!0,link:function(n){t.getThemes().then(function(t){n.themes=t.others});var a=moment().subtract(-1,"days").format("YYYYMMDD");n.goHome=function(){e.go("list",{date:a})},n.goTheme=function(t){e.go("themes",{theme:t})}}}}]),angular.module("menuBar").service("menuBarHttpRequest",["$http","$q",function(t,e){return{getThemes:function(){return t.get("http://news-at.zhihu.com/api/4/themes").then(function(t){return"object"==typeof t.data?t.data:e.reject(t.data)},function(t){return e.reject(t.data)})}}}]);